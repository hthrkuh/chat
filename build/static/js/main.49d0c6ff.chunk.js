(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{45:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},80:function(e,t,s){"use strict";s.r(t);var n=s(6),a=s.n(n),c=s(34),r=s.n(c),i=(s(45),s(14)),l=(s(46),s(39)),m=s(35),o=s(36),u=s(40),j=s(38),d=(s(47),s(37)),h=s.n(d),b=s(0),g=h.a.connect("http://localhost:3050"),p=function(e){Object(u.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(m.a)(this,s),(n=t.call(this,e)).sendMessage=function(){if(0!==n.state.message.length){n.setErr(!1),g.emit("msg-from-client",{name:n.props.name,msg:n.state.message}),n.setMessage("");var e=document.getElementById("messages");null!==e.lastChild&&setTimeout((function(){e.lastChild.scrollIntoView()}),100)}else n.setErr(!0)},n.state={err:!1,message:"",messages:[],date:(new Date).toISOString(),userId:""},n}return Object(o.a)(s,[{key:"setErr",value:function(e){this.setState({err:e})}},{key:"setMessage",value:function(e){this.setState({message:e})}},{key:"setMessages",value:function(e){this.setState({messages:e})}},{key:"componentDidMount",value:function(){var e=this;g.emit("joinRoom",this.props.name,"test"),g.emit("userdata"),g.on("userdata",(function(t){e.setState({userId:t.userId})})),g.on("msg-from-server",(function(t){t.client&&(t.userId==e.state.userId?t.text=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"text-primary",children:t.text.name})," "," : "+t.text.msg," "]}):t.text=Object(b.jsxs)(b.Fragment,{children:[" ",t.text.msg+" : ",Object(b.jsx)("span",{className:"text-warning",children:t.text.name})," "]})),e.setMessages([].concat(Object(l.a)(e.state.messages),[t]))}))}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"chat col-md-5 m-auto",children:[Object(b.jsxs)("p",{children:["Hello ",this.props.name," !"]}),Object(b.jsxs)("div",{className:"messages",id:"messages",children:[Object(b.jsx)("div",{className:"bg-danger justify-content-center messageDiv sticky-top",children:Object(b.jsx)("span",{children:this.state.date})}),0!==this.state.messages.length?this.state.messages.map((function(t,s){return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:t.userId==e.state.userId&&t.client?"messageDiv justify-content-end":"messageDiv",children:Object(b.jsxs)("p",{className:t.userId==e.state.userId&&t.client?"message bg-warning":"message",children:[Object(b.jsx)("span",{className:"text-dark pe-2",style:{fontSize:"smaller"},children:t.time}),t.text]})})},s)})):null]}),this.state.err?Object(b.jsx)("p",{className:"err",children:" You cant send empty message"}):null,Object(b.jsxs)("div",{className:"input-group mb-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter message",value:this.state.message,onChange:function(t){return e.setMessage(t.target.value)}}),Object(b.jsx)("button",{className:"btn btn-primary",type:"button",onClick:this.sendMessage,children:"Send"})]})]})}}]),s}(a.a.Component);var O=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),l=r[0],m=r[1],o=Object(n.useState)(!1),u=Object(i.a)(o,2),j=u[0],d=u[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h1",{children:"Online Chat"}),l?Object(b.jsx)(p,{name:s}):Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("p",{children:"Enter nickname :"}),j?Object(b.jsx)("p",{className:"err",children:"The nickname must contain at least 3 letters"}):null,Object(b.jsxs)("div",{className:"input-group mb-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Nickname",onChange:function(e){return a(e.target.value)}}),Object(b.jsx)("button",{className:"btn btn-primary",type:"button",onClick:function(){!s||s.length<3?d(!0):(d(!1),m(!0))},children:"Enter"})]})]})]})};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.49d0c6ff.chunk.js.map